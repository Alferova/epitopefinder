

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>epitopefinder_plotdistributioncomparison.py &mdash; epitopefinder 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="epitopefinder 0.1 documentation" href="index.html" />
    <link rel="up" title="Analysis scripts" href="analysisscripts.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="epitopefinder_plotcorrelation.py" href="epitopefinder_plotcorrelation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="epitopefinder_plotcorrelation.html" title="epitopefinder_plotcorrelation.py"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">epitopefinder 0.1 documentation</a> &raquo;</li>
          <li><a href="analysisscripts.html" accesskey="U">Analysis scripts</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="epitopefinder-plotdistributioncomparison-py">
<span id="id1"></span><h1>epitopefinder_plotdistributioncomparison.py<a class="headerlink" href="#epitopefinder-plotdistributioncomparison-py" title="Permalink to this headline">¶</a></h1>
<p>This script analyzes of output from <a class="reference internal" href="epitopefinder_getepitopes.html#epitopefinder-getepitopes-py"><em>epitopefinder_getepitopes.py</em></a>. You can use this script if you want to see if some set of the sites in a protein contain more epitopes of some other set of the sites in the same or another protein.</p>
<p>The input data for this script is two or more files listing the number of epitopes per site. These input files are in the format of the <em>epitopesbysite</em> file created by <a class="reference internal" href="epitopefinder_getepitopes.html#epitopefinder-getepitopes-py"><em>epitopefinder_getepitopes.py</em></a> or the <em>selectsitesfile</em> created by <a class="reference internal" href="epitopefinder_selectsites.html#epitopefinder-selectsites-py"><em>epitopefinder_selectsites.py</em></a>. For example, you might use <a class="reference internal" href="epitopefinder_getepitopes.html#epitopefinder-getepitopes-py"><em>epitopefinder_getepitopes.py</em></a> to define the number of epitopes per site for all sites in a protein, and then <a class="reference internal" href="epitopefinder_selectsites.html#epitopefinder-selectsites-py"><em>epitopefinder_selectsites.py</em></a> to define the number of epitopes per site for selected subset of sites in the protein. You could then use this script to compare the distribution of epitope counts per site.</p>
<p>This script utilizes <a class="reference external" href="http://matplotlib.org/">matplotlib</a>, and will fail if that package is not available for importation.</p>
<div class="section" id="running-the-script">
<h2>Running the script<a class="headerlink" href="#running-the-script" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#epitopefinder-plotdistributioncomparison-py"><em>epitopefinder_plotdistributioncomparison.py</em></a> takes as input the name of a single file, the format of which is detailed below. If you have installed the package so that the scripts are the search path, you can run this script directly from the command line. For example, if you called your input file <tt class="docutils literal"><span class="pre">infile.txt</span></tt> then run:</p>
<div class="highlight-python"><pre>epitopefinder_plotdistributioncomparison.py infile.txt</pre>
</div>
<p>If the script is not executable on your platform, then run:</p>
<div class="highlight-python"><pre>python epitopefinder_plotdistributioncomparison.py infile.txt</pre>
</div>
<p>This will create the output plot file described below.</p>
</div>
<div class="section" id="input-file-format">
<h2>Input file format<a class="headerlink" href="#input-file-format" title="Permalink to this headline">¶</a></h2>
<p>The input file is a text file that should contain the following key / value pairs. Each line begins with the key, and is followed by the value for that key. Empty lines or lines beginning with # are ignored:</p>
<blockquote>
<div><ul>
<li><p class="first"><em>plotfile</em> is the name of the PDF plot file that is being created. This file must end with the extension <tt class="docutils literal"><span class="pre">.pdf</span></tt>.</p>
</li>
<li><p class="first"><em>epitopesfile1</em> specifies the name of a file containing the number of epitopes per site. This should be a CSV file matching the format of the <em>epitopesbysite</em> file created by <a class="reference internal" href="epitopefinder_getepitopes.html#epitopefinder-getepitopes-py"><em>epitopefinder_getepitopes.py</em></a> or the <em>selectsitesfile</em> created by <a class="reference internal" href="epitopefinder_selectsites.html#epitopefinder-selectsites-py"><em>epitopefinder_selectsites.py</em></a> . After an initial header line, each line lists the site number followed by the number of epitopes at that site. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Site</span><span class="p">,</span><span class="n">NumberUniqueEpitopes</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">0</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">1</span>
<span class="mi">3</span><span class="p">,</span><span class="mi">1</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">3</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">3</span>
<span class="mi">6</span><span class="p">,</span><span class="mi">3</span>
</pre></div>
</div>
</li>
<li><p class="first"><em>epitopesfile2</em> specifies the name of a second file containing the number of epitopes per site in the same format as <em>epitopesfile1</em>.</p>
</li>
<li><p class="first"><em>set1name</em> is a string (LaTex formatting) that is used to label the distribution of the number of epitopes per site in <em>epitopesfile1</em>.</p>
</li>
<li><p class="first"><em>set2name</em> is a string (LaTex formatting) that is used to label the distribution of the number of epitopes per site in <em>epitopesfile2</em>.</p>
</li>
<li><p class="first"><em>pvalue</em> is an option that should only be used if <em>epitopesfile2</em> specifies a subset of the sites found in <em>epitopesfile1</em>. It allows you to compute the P-value that the subset of sites in <em>epitopesfile2</em> has a higher (or lower) average number of epitopes per site than the full set of sites in <em>epitopesfile1</em>. If you do not want to use this option, set <em>pvalue</em> to <em>None</em>.</p>
<p>Otherwise, <em>pvalue</em> is implemented as follows. We draw random subsets of the same number of sites that are found in <em>epitopesfile2</em> from the full set of sites in <em>epitopesfile1</em>. The number of such random subsets that are drawn is the integer specified by <em>pvalue</em>, so a reasonable value of <em>pvalue</em> is 100000. We then compute the average number of epitopes per site for the random subsets and compare it to the average number of epitopes per site in the actual subset in <em>epitopesfile2</em>. If more than half of the random subsets have fewer average epitopes than the actual subset in <em>epitopesfile2</em>, then the plot reports the P-value that <em>epitopesfile2</em> has more epitopes than a random subset. If less than half of the random subsets have fewer average epitopes than the actual subset, then the plot reports the P-value that <em>epitopesfile2</em> has fewer epitopes than a random subset. So the computed value is a <strong>one-sided</strong> P-value for the hypothesis that the mean number of epitopes per site for the subset of sites in <em>epitopesfile2</em> is &lt; or &gt; than the mean number of epitopes per site expected for a random subset of that many sites from <em>epitopesfile1</em>. The hypothesis that is being test (&lt; or &gt;) is indicated on the plot.</p>
</li>
<li><p class="first"><em>pvaluewithreplacement</em> is an option that is only required if <em>pvalue</em> is being used. In this case, <em>pvaluewithreplacment</em> should be either <em>True</em> or <em>False</em>. If it is <em>True</em>, then the random subsets are drawn with replacement (so the same site can be drawn more than once into a random subset). If it is <em>False</em>, then the random subsets are drawn without replacement (so the same site can only be drawn once into a random subset). You will need to figure out which is more appropriate. In general, if you have created the subset in <em>epitopesfile2</em> using <a class="reference internal" href="epitopefinder_selectsites.html#epitopefinder-selectsites-py"><em>epitopefinder_selectsites.py</em></a> with <em>retainmultiple</em> set to <em>True</em>, then you will want to make <em>pvaluewithreplacement</em> also <em>True</em>. If you have created the subset in <em>epitopesfil2</em> using <a class="reference internal" href="epitopefinder_selectsites.html#epitopefinder-selectsites-py"><em>epitopefinder_selectsites.py</em></a> with <em>retainmultiple</em> set to <em>False</em>, then you will want to make <em>pvaluewithreplacement</em> also <em>False</em>.</p>
<p>If <em>pvalue</em> is <em>None</em>, then you don&#8217;t need to specify any key for <em>pvaluewithreplacement</em>. If you do specify <em>pvaluewithreplacement</em> when <em>pvalue</em> is <em>None</em>, it has no meaning.</p>
</li>
<li><p class="first"><em>title</em> specifies the title placed above the plot. It can be <em>None</em> if no title is to be used. Otherwise, it should be the title (using LaTex formatting, spaces are allowed) that is placed above the plot.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example-input-file">
<h2>Example input file<a class="headerlink" href="#example-input-file" title="Permalink to this headline">¶</a></h2>
<p>Here is an example input file:</p>
<div class="highlight-python"><pre># input file for epitopefinder_plotdistributioncomparison.py
plotfile distributioncomparison_all_vs_subset.pdf
epitopesfile1 epitopesbysite.csv
epitopesfile2 selectedsites.csv
set1name all sites
set2name selected sites
pvalue 100000
pvaluewithreplacement True
title None</pre>
</div>
</div>
<div class="section" id="output-files">
<h2>Output files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<p>This script creates the PDF plot file <em>plotfile</em>, which shows the distribution of number of epitopes per site for <em>epitopesfile1</em> and <em>epitopesfile2</em>. This plot may also display a P-value depending on the setting for <em>pvalue</em>.</p>
<p>Here is an example plot.</p>
<div class="figure align-center">
<img alt="distributioncomparison_example.jpg" src="_images/distributioncomparison_example.jpg" style="width: 45%;" />
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">epitopefinder_plotdistributioncomparison.py</a><ul>
<li><a class="reference internal" href="#running-the-script">Running the script</a></li>
<li><a class="reference internal" href="#input-file-format">Input file format</a></li>
<li><a class="reference internal" href="#example-input-file">Example input file</a></li>
<li><a class="reference internal" href="#output-files">Output files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="epitopefinder_plotcorrelation.html"
                        title="previous chapter">epitopefinder_plotcorrelation.py</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="examples.html"
                        title="next chapter">Examples</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/epitopefinder_plotdistributioncomparison.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >next</a> |</li>
        <li class="right" >
          <a href="epitopefinder_plotcorrelation.html" title="epitopefinder_plotcorrelation.py"
             >previous</a> |</li>
        <li><a href="index.html">epitopefinder 0.1 documentation</a> &raquo;</li>
          <li><a href="analysisscripts.html" >Analysis scripts</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Jesse D. Bloom.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>